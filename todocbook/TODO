
==================
  Instructions For Helpers
==================

Most of the below is intended to be done as needed as you review a
particular chapter/section.  It looks like more complexity than it
actually is; you'll get used to it.

    SAY HERE WHAT YOU'VE DONE, including parts you haven't completed
    (like index work).

Robin Powell: 5.1, 5.2, 5.3

 ------

Ignore Chapter 2 for now.

 ------

Fix the chapter name so it's just the second part, i.e.

    <title>Chapter 5
      <quote>Pretty Little Girls' School</quote>: The Structure Of Lojban selbri</title>

becomes:

    <title><quote>Pretty Little Girls' School</quote>: The Structure Of Lojban selbri</title>

Make sure the <interlinear-gloss> bits look right (which is why the
columns are so spaced out).

 ------

Fix IDs/tags.  A command like the following should do the trick:

  sed -i 's/"cll_chapter5"/"selbri"/g' [0-9]*.xml

BUT FIRST: check that it doesn't already exist:

  grep '"selbri"' [0-9]*.xml

because duplicates would really suck.

Please run "git diff" afterwards to make sure it did what you
expected.  Check in as often as you like (to make the diffs
manageable).

We want short and meaningful; these are used to make file names and
so on.  If multi-word, please make a slug (see
http://en.wikipedia.org/wiki/Slug_%28web_publishing%29 ); we are
using - based slugs rather than _ based, so drop all special
characters, lowercase, replace space with -.

Do this for all sections.  Feel free to do it for examples too if an
example has an obvious title, but it's much less important there, so
not worth spending time on for the first pass.

The important thing here is that *NOTHING* mentions a fixed number!
*NOWHERE* in the docbook should *ANYTHING* be aware that it is in
chapter 20 or section 7 or anything like that.  This is to give us
the freedom to move things around later.

Numeric-based stuff will all be autogenerated during processing,
based on the current state of the docs.

 ------

With the caveat that indexterm entries for examples should look
exactly like this:

<indexterm><primary>[item]</primary><secondary>example</secondary></indexterm>

, do feel free to add index entries where they seem useful.  It's
unlikely that we can ever have a too-thorough index (and it's a lot
easier to cut the thing down than to grow it anyways).

 ------

Feel free to do visual cleanup *of the source*; don't worry about
how crappy the *output* looks, we're only doing data structures
right now.  In particular, there are a lot of elements with no space
after their terminators; it doesn't really matter, but it's
annoying.

 ------

If you see a <quote>...</quote> around Lojban text, replace it with
<jbophrase>...</jbophrase>.  There are lots of these.

 ------

If an example/interlinear-gloss consists solely of English, replace
the <interlinear-gloss>...</interlinear-gloss> with <para>...</para>

 ------

Deal with index entries already in the text, like these:

    <example role="interlinear-gloss-example" xml:id="random-id-UMjE">
      <title>
        <anchor xml:id="c5e1d5" />
        <anchor xml:id="cll_chapter5-section1-example5" />
      </title>
      <interlinear-gloss>
        <jbo>ta blotrskunri</jbo>
        <gloss>That is-a-(boat)-schooner.</gloss>
<!-- ^^   schooner: example, 83 -->
<indexterm><primary>schooner</primary></indexterm>

There are several steps:

1.  Add a <secondary> tag as appropriate.  In this case, "example".

2.  Move it to somewhere that seems aesthetically pleasing, is
accepted by docbook (try running "make" to check), and is very near
the text in question.  For examples, this is just after the title.
Just inside a <para> (move the actual text after the <indexterm>) is
often a good choice.
  
  YOU MAY NEED A COPY OF THE RED BOOK to do this part effectively,
  because you should be tagging the same bits of text as it is
  (along with others if you wish).

3.  Check, and possibly remove, other instances of the same index
word.

The result here is:

    <example role="interlinear-gloss-example" xml:id="random-id-UMjE">
      <title>
        <anchor xml:id="c5e1d5" />
        <anchor xml:id="cll_chapter5-section1-example5" />
      </title>
      <indexterm><primary>schooner</primary><secondary>example</secondary></indexterm>
      <interlinear-gloss>
        <jbo>ta blotrskunri</jbo>
        <gloss>That is-a-(boat)-schooner.</gloss>
        <en>That is a schooner.</en>
      </interlinear-gloss>
    </example>

with all other instances removed.  To find them, try:

  grep "<indexterm><primary>schooner<" [0-9]*.xml

or similar.

Please use *exactly* that
<indexterm><primary>[item]</primary><secondary>example</secondary></indexterm>
format for examples, as we might want to automatically munge it
later.

4.  Make sure that all the *other* options listed for the keyword
exist somewhere.  For example, given:

  <!-- ^^   tanru grouping: complex, 87; effect of tanru inversion on, 96; guheks compared with jeks, 350; three-part, 85; with bo, 87; with ke, 88; with ke and bo, 88 -->

that all 7 of those entries actually have referents somewhere in the text.

  YOU MAY NEED A COPY OF THE RED BOOK to do this part effectively,
  because you should be tagging the same bits of text as it is
  (along with others if you wish).

 ------

NON-CHATPER work: Add index entries based on TODO-index.  Pick a
point in the middle somewhere, please, and *especially* for this
work, check in often.

You will almost certainly need a physical copy of the red book to do
this effectively.

There are two kinds of entries in that file:

  animals -- has count 11, skipping --   animals: use of fu'ivla for specific, 61

Means that "animals" had more than 10 matches, so the automatic
marker assumed that there was a problem.

  anomalous ordering of lujvo places -- has count 0, skipping -- anomalous ordering of lujvo places, 283

Means that "anomalous ordering of lujvo places" had 0 matches, so
the automatic marker is sure that there was a problem.

In both cases, the part after the -- is the full index entry from
the original print CLL, and the entry when you're done should look
as close to that as possible (except that : means "the part after
this should go in a <secondary> tag", and obvy the page number won't
match)

You can find the full text of the original index in origcllindex.txt
if you need it.

 ------


==================
  Data
==================
- Need some sort of structure for the per-section cmavo lists.
  - also need to wrap the lojban words there in a way that does
    indexing, and ideally auto-generation of the cmavo-per-selmaho
    lists we want for chapter 20
- lojban words, lojban phrases, terms of art ("abstraction"),
  others?... should each have their own index
- cll_chapter5-section1 should be content-words-brivla or so ; those
  IDs should not change when things are moved around
- list the members of each selma'o in chapter 20

==================
  Display
==================
- links to examples should *say* "example N"; easy to test from the
  index
- links to sections should say the number of section and chapter
- examples should be 5.2.1 rather than 5.6 for the first example in
  section 2 of chatpre 5
- print: Add a header or footer to the left or the right page that
  has the number of the chapter you're in.

==================
  Both/Other
==================
- make sure backwards-compatible anchors exist
  - Ideally, make sure they are autogenerated as part of the HTML
    production.
- Similarily, generate more-readable anchors based on current
  section number and such
